(function(){'use strict';function setupPasswordToggle(toggleId,inputId,iconId){const toggle = document.getElementById(toggleId);const input = document.getElementById(inputId);const icon = document.getElementById(iconId);if(toggle && input && icon){toggle.addEventListener('click',function(){const type = input.getAttribute('type')=== 'password' ? 'text' : 'password';input.setAttribute('type',type);icon.className = type === 'password' ? 'fas fa-eye' : 'fas fa-eye-slash';});}}setupPasswordToggle('passwordToggle','password','passwordToggleIcon');setupPasswordToggle('passwordConfirmToggle','password_confirm','passwordConfirmToggleIcon');function checkRequirement(requirementId,condition){const req = document.getElementById(requirementId);if(!req)return false;const icon = req.querySelector('i');if(condition){req.classList.remove('invalid');req.classList.add('valid');if(icon){icon.className = 'fas fa-check-circle';}}else{req.classList.remove('valid');req.classList.add('invalid');if(icon){icon.className = 'fas fa-circle';}}return condition;}window.checkPasswordStrength = function(password){const strengthBar = document.getElementById('passwordStrengthBar');const strengthText = document.getElementById('passwordStrengthText');const passwordInput = document.getElementById('password');const passwordFeedback = document.getElementById('passwordFeedback');if(!strengthBar || !strengthText || !passwordInput)return;const hasLength = password.length >= 8 && password.length <= 15;const hasUppercase = /[A-Z]/.test(password);const hasLowercase = /[a-z]/.test(password);const hasNumber = /[0-9]/.test(password);const hasSpecial = /[^A-Za-z0-9]/.test(password);checkRequirement('reqLength',hasLength);checkRequirement('reqUppercase',hasUppercase);checkRequirement('reqLowercase',hasLowercase);checkRequirement('reqNumber',hasNumber);checkRequirement('reqSpecial',hasSpecial);let strength = 0;let strengthLevel = 'weak';let strengthLabel = 'Faible';if(hasLength)strength++;if(hasUppercase)strength++;if(hasLowercase)strength++;if(hasNumber)strength++;if(hasSpecial)strength++;if(strength === 5){strengthLevel = 'strong';strengthLabel = 'Fort';}else if(strength >= 3){strengthLevel = 'medium';strengthLabel = 'Moyen';}else{strengthLevel = 'weak';strengthLabel = 'Faible';}strengthBar.className = 'password-strength-bar ' + strengthLevel;strengthText.className = 'password-strength-text ' + strengthLevel;strengthText.textContent = strengthLabel;if(password.length > 0){if(!hasLength){passwordInput.classList.add('is-invalid');passwordInput.classList.remove('is-valid');if(passwordFeedback){passwordFeedback.textContent = 'Le mot de passe doit contenir entre 8 et 15 caractères.';passwordFeedback.style.display = 'flex';}}else if(!hasUppercase){passwordInput.classList.add('is-invalid');passwordInput.classList.remove('is-valid');if(passwordFeedback){passwordFeedback.textContent = 'Le mot de passe doit contenir au moins une majuscule.';passwordFeedback.style.display = 'flex';}}else if(!hasLowercase){passwordInput.classList.add('is-invalid');passwordInput.classList.remove('is-valid');if(passwordFeedback){passwordFeedback.textContent = 'Le mot de passe doit contenir au moins une minuscule.';passwordFeedback.style.display = 'flex';}}else if(!hasNumber){passwordInput.classList.add('is-invalid');passwordInput.classList.remove('is-valid');if(passwordFeedback){passwordFeedback.textContent = 'Le mot de passe doit contenir au moins un chiffre.';passwordFeedback.style.display = 'flex';}}else if(!hasSpecial){passwordInput.classList.add('is-invalid');passwordInput.classList.remove('is-valid');if(passwordFeedback){passwordFeedback.textContent = 'Le mot de passe doit contenir au moins un caractère spécial.';passwordFeedback.style.display = 'flex';}}else{passwordInput.classList.remove('is-invalid');passwordInput.classList.add('is-valid');if(passwordFeedback){passwordFeedback.style.display = 'none';}}}else{passwordInput.classList.remove('is-invalid','is-valid');if(passwordFeedback){passwordFeedback.style.display = 'none';}}checkPasswordMatch();updateSubmitButton();};window.checkPasswordMatch = function(){const password = document.getElementById('password').value;const passwordConfirm = document.getElementById('password_confirm');const passwordConfirmFeedback = document.getElementById('passwordConfirmFeedback');if(!passwordConfirm || !passwordConfirmFeedback)return;if(passwordConfirm.value.length > 0){if(password !== passwordConfirm.value){passwordConfirm.classList.add('is-invalid');passwordConfirm.classList.remove('is-valid');passwordConfirmFeedback.textContent = 'Les mots de passe ne correspondent pas.';passwordConfirmFeedback.style.display = 'flex';}else{passwordConfirm.classList.remove('is-invalid');passwordConfirm.classList.add('is-valid');passwordConfirmFeedback.style.display = 'none';}}else{passwordConfirm.classList.remove('is-invalid','is-valid');passwordConfirmFeedback.style.display = 'none';}updateSubmitButton();};function updateSubmitButton(){const submitBtn = document.getElementById('submitBtn');const password = document.getElementById('password').value;const passwordConfirm = document.getElementById('password_confirm').value;const passwordInput = document.getElementById('password');if(!submitBtn)return;const isPasswordValid = passwordInput.classList.contains('is-valid');const isPasswordMatch = password === passwordConfirm && password.length > 0;const allRequirementsMet = document.getElementById('reqLength')?.classList.contains('valid')&& document.getElementById('reqUppercase')?.classList.contains('valid')&& document.getElementById('reqLowercase')?.classList.contains('valid')&& document.getElementById('reqNumber')?.classList.contains('valid')&& document.getElementById('reqSpecial')?.classList.contains('valid');if(isPasswordValid && isPasswordMatch && allRequirementsMet){submitBtn.disabled = false;}else{submitBtn.disabled = password.length === 0 && passwordConfirm.length === 0 ? false : true;}}const adminForm = document.getElementById('adminForm');if(adminForm){adminForm.addEventListener('submit',function(e){const password = document.getElementById('password').value;const passwordConfirm = document.getElementById('password_confirm').value;const username = document.getElementById('username').value;const email = document.getElementById('email').value;let hasError = false;if(username.length < 3){document.getElementById('username').classList.add('is-invalid');document.getElementById('usernameFeedback').textContent = 'Le nom d\'utilisateur doit contenir au moins 3 caractères.';document.getElementById('usernameFeedback').style.display = 'flex';hasError = true;}else{document.getElementById('username').classList.remove('is-invalid');document.getElementById('usernameFeedback').style.display = 'none';}const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(email)){document.getElementById('email').classList.add('is-invalid');document.getElementById('emailFeedback').textContent = 'Veuillez entrer une adresse email valide.';document.getElementById('emailFeedback').style.display = 'flex';hasError = true;}else{document.getElementById('email').classList.remove('is-invalid');document.getElementById('emailFeedback').style.display = 'none';}if(password.length < 8 || password.length > 15){document.getElementById('password').classList.add('is-invalid');document.getElementById('passwordFeedback').textContent = 'Le mot de passe doit contenir entre 8 et 15 caractères.';document.getElementById('passwordFeedback').style.display = 'flex';hasError = true;}else if(!/[A-Z]/.test(password)){document.getElementById('password').classList.add('is-invalid');document.getElementById('passwordFeedback').textContent = 'Le mot de passe doit contenir au moins une majuscule.';document.getElementById('passwordFeedback').style.display = 'flex';hasError = true;}else if(!/[a-z]/.test(password)){document.getElementById('password').classList.add('is-invalid');document.getElementById('passwordFeedback').textContent = 'Le mot de passe doit contenir au moins une minuscule.';document.getElementById('passwordFeedback').style.display = 'flex';hasError = true;}else if(!/[0-9]/.test(password)){document.getElementById('password').classList.add('is-invalid');document.getElementById('passwordFeedback').textContent = 'Le mot de passe doit contenir au moins un chiffre.';document.getElementById('passwordFeedback').style.display = 'flex';hasError = true;}else if(!/[^A-Za-z0-9]/.test(password)){document.getElementById('password').classList.add('is-invalid');document.getElementById('passwordFeedback').textContent = 'Le mot de passe doit contenir au moins un caractère spécial.';document.getElementById('passwordFeedback').style.display = 'flex';hasError = true;}if(password !== passwordConfirm){document.getElementById('password_confirm').classList.add('is-invalid');document.getElementById('passwordConfirmFeedback').textContent = 'Les mots de passe ne correspondent pas.';document.getElementById('passwordConfirmFeedback').style.display = 'flex';hasError = true;}if(hasError){e.preventDefault();const firstError = document.querySelector('.is-invalid');if(firstError){firstError.scrollIntoView({behavior: 'smooth',block: 'center'});firstError.focus();}return false;}const submitBtn = this.querySelector('button[type="submit"]');if(submitBtn){submitBtn.disabled = true;submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Création en cours...';}});}const usernameInput = document.getElementById('username');if(usernameInput){usernameInput.addEventListener('input',function(){if(this.value.length >= 3){this.classList.remove('is-invalid');this.classList.add('is-valid');const feedback = document.getElementById('usernameFeedback');if(feedback)feedback.style.display = 'none';}else if(this.value.length > 0){this.classList.add('is-invalid');this.classList.remove('is-valid');const feedback = document.getElementById('usernameFeedback');if(feedback){feedback.textContent = 'Le nom d\'utilisateur doit contenir au moins 3 caractères.';feedback.style.display = 'flex';}}else{this.classList.remove('is-invalid','is-valid');const feedback = document.getElementById('usernameFeedback');if(feedback)feedback.style.display = 'none';}});}const emailInput = document.getElementById('email');if(emailInput){emailInput.addEventListener('input',function(){const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(emailRegex.test(this.value)){this.classList.remove('is-invalid');this.classList.add('is-valid');const feedback = document.getElementById('emailFeedback');if(feedback)feedback.style.display = 'none';}else if(this.value.length > 0){this.classList.add('is-invalid');this.classList.remove('is-valid');const feedback = document.getElementById('emailFeedback');if(feedback){feedback.textContent = 'Veuillez entrer une adresse email valide.';feedback.style.display = 'flex';}}else{this.classList.remove('is-invalid','is-valid');const feedback = document.getElementById('emailFeedback');if(feedback)feedback.style.display = 'none';}});}document.addEventListener('DOMContentLoaded',function(){const passwordInput = document.getElementById('password');if(passwordInput){passwordInput.addEventListener('input',function(){checkPasswordStrength(this.value);});}const passwordConfirmInput = document.getElementById('password_confirm');if(passwordConfirmInput){passwordConfirmInput.addEventListener('input',function(){checkPasswordMatch();});}});})();